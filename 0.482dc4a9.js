webpackJsonp([0],{f91cf95aa6405a82ccb7:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("c5a1a13287d8ad4f043e"),d=l(n),u=a("9be1effb1238979c7746"),s=l(u),f=a("eac54253659ab20592f0"),c=l(f),r=a("3f8a5f50ea63e42bae39"),o=l(r),i=a("aff7e8dcc6a4bd162daa"),m=l(i),h=a("2d992fe19e3366652040"),b=l(h),p=a("e3812a5bd03d8b46e6ce"),y=l(p),g=a("edf9ead513b39914e52e"),k=l(g),E=a("0c665a315c033eeedd00"),v=l(E),C=a("429dd059d16dfe6bc957"),w=l(C),S=a("424a28e84bfcbae33585"),N=l(S),D=a("e0790b6fd5e6e60f472d"),O=l(D),I=a("2b7e55a3b6d12b431ecb"),x=l(I),R=a("f3b07a043f19e27a6aca"),T=l(R);a("1c3040e0ca639c4ad94e"),a("86aab25b66675efcfa27"),a("08533390d182b3212ad6"),a("4113ac831dd3f5f44ba8"),a("4911b9603972fc5ce1f0"),a("6c5d583c40f088742b62"),a("439526c51b45c0b0bc70"),a("f7fc5a2ae2c7b39e07b3"),a("932a56dcc2009b767c97");var _=a("07eff9bc9275f0f3737f"),z=l(_),K=a("bd28e01430e7577fbcc2"),M=(l(K),a("e88b2eca4f4175f73a36")),P=l(M),W=a("63b0817baede16f2bced"),Y=l(W),H=a("68dd8c1315cbe355402d"),j=l(H),J=Y.default.preWeek(),L=Y.default.nowYmd(),A=function(e){function t(e){(0,N.default)(this,t);var a=(0,x.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.ok=function(e){w.default.confirm({title:"审核确认",content:"您是否确认通过该员工的请求?",okText:"确认",cancelText:"取消",onOk:function(){}})},a.refuse=function(e){a.setState({record:e,visible:!0})},a.loadData=function(){var e=a;a.setState({loading:!0}),(0,P.default)({url:"/logout",type:"get",dataType:"json",data:{}}).then(function(t){e.setState({loading:!1}),200!==t.state&&v.default.error(t.msg)}).catch(function(t){e.setState({loading:!1}),v.default.error(t.statusText)})},a.search=function(){a.loadData()},a.reset=function(){a.setState({userId:"",userName:"",releaseDate:[J+" 00:00:00",L+" 23:59:59"],dataSource:[]}),setTimeout(function(){a.loadData()},200)},a.tableRowClick=function(e,t){a.setState({selectedRowKeys:[e.key]})},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,releaseDate:[J+" 00:00:00",L+" 23:59:59"],selectedRowKeys:[],selectedRows:[],pagination:{defaultCurrent:1,defaultPageSize:8,showQuickJumper:!0,pageSize:10,onChange:function(e){this.loadData(e,this.state.sorderData)}.bind(a),showTotal:function(e){return"共"+e+"条数据"}},dataSource:[{phone:"18325465478",key:"213",userName:"张三",body:"世界那么大,我想去看看。世界那么大,我想去看看",de:"湖北电子科技有限公司",time:"2019-10-10 20:00:00",type:"请假"},{phone:"18325465734",key:"214",userName:"李四",time:"2019-10-10 19:00:00",type:"调休"}],columns:[{title:"拜访人姓名",dataIndex:"userName",key:"userName"},{title:"所属公司",dataIndex:"de",key:"de"},{title:"拜访人电话",dataIndex:"phone",key:"phone"},{title:"拜访时间",dataIndex:"time",key:"time"},{title:"拜访事由",dataIndex:"body",key:"body",render:function(e){return e&&e.length>14?z.default.createElement(k.default,{title:e},z.default.createElement("span",null,e.substr(0,10),"...")):e}},{title:"审核",dataIndex:"tt",key:"tt",render:function(e,t){return z.default.createElement("span",null,z.default.createElement(y.default,{size:"small",onClick:function(){a.ok(t)},style:{marginRight:10},type:"primary"},"同意"),z.default.createElement(y.default,{size:"small",type:"danger",onClick:function(){a.refuse(t)}},"拒绝"))}}]},a}return(0,T.default)(t,e),(0,O.default)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){a.length==e.state.pagination.pageSize&&(t=[]),e.setState({selectedRows:a.slice(-1),selectedRowKeys:t.slice(-1)})}},a=b.default.TextArea,l={labelCol:{span:8},wrapperCol:{span:12}},n=this.state.record||{},u=this.state.columns||[],f=m.default.RangePicker;return z.default.createElement(d.default,{tip:"数据加载中,请稍候...",spinning:this.state.loading},z.default.createElement("div",{className:"pageWrap"},z.default.createElement("div",{className:"isWindow"},z.default.createElement("div",{className:"seachTable"},z.default.createElement("div",{className:"user-search"},z.default.createElement(b.default,{placeholder:"姓名",className:"inputWin",value:this.state.userName,onChange:function(t){e.setState({userName:t.target.value})}}),z.default.createElement(b.default,{placeholder:"编号",className:"inputWin",value:this.state.userId,onChange:function(t){e.setState({userId:t.target.value})}}),z.default.createElement(f,{ranges:{"今日":[(0,j.default)().startOf("day"),(0,j.default)().endOf("day")],"最近一周":[(0,j.default)().subtract(6,"days").startOf("day"),(0,j.default)().endOf("day")],"本月":[(0,j.default)().startOf("month"),(0,j.default)().endOf("month")],"上月":[(0,j.default)().subtract(1,"month").startOf("month"),(0,j.default)().subtract(1,"month").endOf("month")],"最近一月":[(0,j.default)().subtract(1,"month").startOf("day"),(0,j.default)().endOf("day")]},showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:["开始时间","结束时间"],value:[this.state.releaseDate[0]?(0,j.default)(this.state.releaseDate[0]):null,this.state.releaseDate[1]?(0,j.default)(this.state.releaseDate[1]):null],onChange:function(t,a){e.setState({releaseDate:a})}}),z.default.createElement(y.default,{type:"primary",onClick:this.search},"搜索"),z.default.createElement(y.default,{type:"default",onClick:this.reset},"重置")),z.default.createElement("div",{className:"patent-table"},z.default.createElement(o.default,{columns:u,dataSource:this.state.dataSource,rowSelection:t,pagination:this.state.pagination,onRow:function(t){return{onClick:function(a){e.tableRowClick(t)}}}}))),z.default.createElement(w.default,{title:"拒绝原因",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,footer:null,width:"500px"},z.default.createElement("div",null,z.default.createElement(s.default.Item,(0,c.default)({},l,{label:"访客姓名"}),z.default.createElement("span",null,n.menuId)),z.default.createElement(s.default.Item,(0,c.default)({},l,{label:"访客电话"}),z.default.createElement("span",null,n.menuName)),z.default.createElement(s.default.Item,(0,c.default)({className:"itemCol"},l,{label:"拒绝原因"}),z.default.createElement(a,{placeholder:"拒绝原因",maxLength:"200"})),z.default.createElement(s.default.Item,{wrapperCol:{span:12,offset:8}},z.default.createElement(y.default,{type:"primary"},"拒绝"),z.default.createElement(y.default,{onClick:this.handleCancel,type:"danger",style:{marginLeft:20}},"取消"))))),z.default.createElement("div",{className:"isPhone"},"手机端")))}}]),t}(z.default.Component);t.default=A,e.exports=t.default}});